@use "sass:math";

@import "variables";
@import "theme";
@import "../../mixins";
@import "../../font";
@import "../../theme";

:root {
  --u-switch-background: var(--u-surface-variant-color);
}

.u-switch {
  display: inline-flex;
  align-items: center;
  margin-bottom: 0;
  font-family: $u-font-family-base;

  @include hide-native-input;

  .u-selection-control-label {
    margin-left: $u-switch-label-margin;
  }
}

.u-selection-control,
.u-selection-control-label {
  cursor: pointer;
}

.u-switch {
  .u-selection-control {
    position: relative;
    flex-shrink: 0;
    width: $u-switch-width;
    height: $u-switch-height;
    border-radius: $u-switch-border-radius;
    border: $u-switch-outline-width solid var(--u-outline-color);
    background: var(--u-switch-background);
    transition: background 200ms, border-color 200ms;

    &::before {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      content: "";
      background: currentColor;
      border-radius: $u-switch-border-radius;
      opacity: .2;
      transition: background 300ms;
    }
  }

  .u-selection-control-label {
    font-size: $u-switch-label-font-size;
  }

  .u-check-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    width: $u-switch-toggle-size;
    height: $u-switch-toggle-size;
    background: var(--u-outline-color);
    border: $u-switch-toggle-border-size solid var(--u-switch-background);
    border-radius: 50%;
    transition: transform 150ms, border-width 100ms, border-color 200ms;
    transform: translate3d(0, 0, 0);

    &:active {
      border-width: 0;
    }
  }

  &.checked .u-selection-control,
  input:checked ~ .u-selection-control {
    --u-switch-background: var(--u-primary-color);
    border-color: var(--u-switch-background);
  }

  &.checked .u-check-indicator,
  input:checked ~ .u-selection-control .u-check-indicator {
    border-width: $u-switch-checked-toggle-border-size;
    background-color: var(--u-on-primary-color);
    transform: translate3d($u-switch-width - .25rem - $u-switch-toggle-size, 0, 0);

    &:active {
      border-width: 0;
    }
  }

  &.disabled .u-selection-control,
  input:disabled ~ .u-selection-control {
    opacity: $u-switch-disabled-opacity;

    .u-check-indicator {
      border-width: $u-switch-toggle-border-size;

      &::before {
        display: none;
      }
    }
  }

  &.disabled .u-selection-control,
  &.disabled .u-selection-control-label,
  input:disabled ~ .u-selection-control,
  input:disabled ~ .u-selection-control-label {
    cursor: auto;
  }
}

.rtl,
[dir="rtl"] {
  .u-switch {
    .u-selection-control-label {
      margin-right: $u-switch-label-margin;
      margin-left: 0;
    }
  }
}
